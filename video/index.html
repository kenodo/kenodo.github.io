<!DOCTYPE html>
<html>

<head><meta content="width=device-width, initial-scale=1" name="viewport" /></head>

<body>

    <style>
        body,
        html {
            height: 100%;
            width: 100%;
            overflow: hidden;
            margin: 0;
        }

        .skipBtn {
            position: absolute;
            right:2%;
            bottom:2%;
            width: 30%;
            height: 15%;
            background-color: black;
            color: white;
           
            font-size: 20pt;
            font-family: Arial;
            text-align: center;
            border-radius: 5%;
            cursor: pointer;
            border: 3px solid white;
            z-index: 999;
        }

       
        
        
        @media screen and (max-width:500px){
             #player {
            height:80%;
            margin-top:10%;
        }
            
            .skipBtn{
                bottom:0;
                right:0;
                width:40%;
                height:10%;
            }
        }
        
        
    </style>
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->

   
    <button class="skipBtn"><p id='skipBtnText'>5</p></button>


    <div class="vidFromVimeo">

    </div>




    <div id="player" style='position: absolute;z-index:0;'></div>



    <script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>
    <script>
        // переменные

        var youtubeVideoId = "M7lc1UVf-VE";
        var secondsCounting = 5;
        var vimeoVideoUrl='https://player.vimeo.com/video/331466789';
        //
        //
        //




        $('#skipBtnText').text(secondsCounting);
        
        // 2. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: youtubeVideoId,
                playerVars: {
                    controls: 0
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();


        }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.

        var adSkipped = false;


        function onPlayerStateChange(event) {
            console.log(event.data);
            if (event.data == YT.PlayerState.PLAYING) {
                interval = setInterval(updateTimer, 1000);

            }
        }

        function skipAd() {
            console.log('skipping ad');
            $('.vidFromVimeo').load('vimeo.html', function(){
                $('#vimeoIframe').attr('src',vimeoVideoUrl+'?autoplay=1&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:100%;height:100%;');
            });
            
            $('#player').hide();
            $('.skipBtn').hide();
        }

        function updateTimer() {
            if (adSkipped) return;

            var secondsToGo = parseInt($('#skipBtnText').text());
            $('#skipBtnText').text(secondsToGo - 1);
            console.log(secondsToGo);

            if (secondsToGo <= 0) {

                player.mute();
                adSkipped = true;
                $('#skipBtnText').text('Skip Ad');
                $(".skipBtn").bind("click", skipAd);

                clearInterval(interval);
            }
        }
        
        
        $("iframe").click(function(){
            alert('kek');
        });
    </script>
</body>

</html>